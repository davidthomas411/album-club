{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/dxt397/Documents/AlbumClub/components/sidebar.tsx"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport { usePathname } from 'next/navigation'\nimport { Home, ListMusic, Plus, Search, Settings, X, Music2 } from 'lucide-react'\n\ninterface SidebarProps {\n  onClose?: () => void\n}\n\nexport function Sidebar({ onClose }: SidebarProps) {\n  const pathname = usePathname()\n\n  const links = [\n    { href: '/', label: 'Home', icon: Home },\n    { href: '/feed', label: 'Feed', icon: Music2 },\n    { href: '/playlists', label: 'Playlists', icon: ListMusic },\n    { href: '/search', label: 'Search', icon: Search },\n    { href: '/admin', label: 'Admin', icon: Settings },\n  ]\n\n  return (\n    <div className=\"relative md:fixed left-0 top-0 h-full w-64 bg-sidebar flex flex-col p-6 gap-6 shadow-xl md:shadow-none z-50\">\n      {onClose && (\n        <button\n          onClick={onClose}\n          className=\"absolute top-4 right-4 md:hidden text-muted-foreground hover:text-foreground\"\n        >\n          <X className=\"w-6 h-6\" />\n        </button>\n      )}\n\n      {/* Banner */}\n      <div className=\"mb-6 space-y-1 rounded-xl border border-primary/40 bg-primary/10 p-4 text-primary-foreground shadow-sm\">\n        <p className=\"text-lg font-bold text-primary\">Album Club</p>\n        <p className=\"text-xs text-muted-foreground\">Neil made us quit Spotify because morals</p>\n      </div>\n\n      {/* Navigation */}\n      <nav className=\"flex flex-col gap-2\">\n        {links.map((link) => {\n          const Icon = link.icon\n          const isActive = pathname === link.href\n          return (\n            <Link\n              key={link.href}\n              href={link.href}\n              className={`flex items-center gap-4 px-4 py-3 rounded-md transition-colors ${\n                isActive\n                  ? 'bg-surface-hover text-foreground'\n                  : 'text-muted-foreground hover:text-foreground hover:bg-surface-hover'\n              }`}\n              onClick={onClose}\n            >\n              <Icon className=\"w-6 h-6\" />\n              <span className=\"font-semibold\">{link.label}</span>\n            </Link>\n          )\n        })}\n      </nav>\n\n      {/* Add Pick Button */}\n      <Link href=\"/add-pick\" className=\"mt-4 flex items-center justify-center gap-2 bg-primary hover:bg-primary-hover text-black font-bold py-3 px-6 rounded-full transition-colors\" onClick={onClose}>\n        <Plus className=\"w-5 h-5\" />\n        Add Pick\n      </Link>\n\n      {/* Bottom section */}\n      <div className=\"mt-auto pt-6 border-t border-border\">\n        <p className=\"text-sm text-muted-foreground\">\n          Share music from any platform\n        </p>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAJA;;;;AAUO,SAAS,QAAQ,EAAE,OAAO,EAAgB;;IAC/C,MAAM,WAAW,IAAA,mRAAW;IAE5B,MAAM,QAAQ;QACZ;YAAE,MAAM;YAAK,OAAO;YAAQ,MAAM,kSAAI;QAAC;QACvC;YAAE,MAAM;YAAS,OAAO;YAAQ,MAAM,2SAAM;QAAC;QAC7C;YAAE,MAAM;YAAc,OAAO;YAAa,MAAM,oTAAS;QAAC;QAC1D;YAAE,MAAM;YAAW,OAAO;YAAU,MAAM,uSAAM;QAAC;QACjD;YAAE,MAAM;YAAU,OAAO;YAAS,MAAM,6SAAQ;QAAC;KAClD;IAED,qBACE,4TAAC;QAAI,WAAU;;YACZ,yBACC,4TAAC;gBACC,SAAS;gBACT,WAAU;0BAEV,cAAA,4TAAC,wRAAC;oBAAC,WAAU;;;;;;;;;;;0BAKjB,4TAAC;gBAAI,WAAU;;kCACb,4TAAC;wBAAE,WAAU;kCAAiC;;;;;;kCAC9C,4TAAC;wBAAE,WAAU;kCAAgC;;;;;;;;;;;;0BAI/C,4TAAC;gBAAI,WAAU;0BACZ,MAAM,GAAG,CAAC,CAAC;oBACV,MAAM,OAAO,KAAK,IAAI;oBACtB,MAAM,WAAW,aAAa,KAAK,IAAI;oBACvC,qBACE,4TAAC,ySAAI;wBAEH,MAAM,KAAK,IAAI;wBACf,WAAW,CAAC,+DAA+D,EACzE,WACI,qCACA,sEACJ;wBACF,SAAS;;0CAET,4TAAC;gCAAK,WAAU;;;;;;0CAChB,4TAAC;gCAAK,WAAU;0CAAiB,KAAK,KAAK;;;;;;;uBAVtC,KAAK,IAAI;;;;;gBAapB;;;;;;0BAIF,4TAAC,ySAAI;gBAAC,MAAK;gBAAY,WAAU;gBAA8I,SAAS;;kCACtL,4TAAC,iSAAI;wBAAC,WAAU;;;;;;oBAAY;;;;;;;0BAK9B,4TAAC;gBAAI,WAAU;0BACb,cAAA,4TAAC;oBAAE,WAAU;8BAAgC;;;;;;;;;;;;;;;;;AAMrD;GAjEgB;;QACG,mRAAW;;;KADd"}},
    {"offset": {"line": 190, "column": 0}, "map": {"version":3,"sources":["file:///Users/dxt397/Documents/AlbumClub/components/face-tracker.tsx"],"sourcesContent":["'use client'\n\nimport { useEffect, useRef, useState } from 'react'\n\ninterface FaceTrackerProps {\n  memberFolder: string // e.g., 'john', 'sarah'\n  blobUrls?: Record<string, string> // Map of filename -> blob URL\n  size?: number\n  debug?: boolean\n  disableOnMobile?: boolean // New prop to disable tracking on mobile\n}\n\nconst P_MIN = -15\nconst P_MAX = 15\nconst STEP = 3\nconst SIZE = 256\n\nfunction clamp(value: number, min: number, max: number) {\n  return Math.max(min, Math.min(max, value))\n}\n\nfunction quantizeToGrid(val: number) {\n  const raw = P_MIN + (val + 1) * (P_MAX - P_MIN) / 2 // [-1,1] -> [-15,15]\n  const snapped = Math.round(raw / STEP) * STEP\n  return clamp(snapped, P_MIN, P_MAX)\n}\n\nfunction sanitize(val: number) {\n  // Convert to format: 15.0 -> \"15p0\", -15.0 -> \"m15p0\", 0.0 -> \"0p0\"\n  const intPart = Math.round(val)\n  const decimalPart = 0 // Face looker uses .0 for all values\n  \n  if (intPart < 0) {\n    return `m${Math.abs(intPart)}p${decimalPart}` // -15 -> m15p0\n  }\n  return `${intPart}p${decimalPart}` // 15 -> 15p0, 0 -> 0p0\n}\n\nfunction gridToFilename(px: number, py: number, size: number) {\n  return `gaze_px${sanitize(px)}_py${sanitize(py)}_${size}.webp`\n}\n\nexport function FaceTracker({ memberFolder, blobUrls, size = SIZE, debug = false, disableOnMobile = false }: FaceTrackerProps) {\n  const containerRef = useRef<HTMLDivElement>(null)\n  const imgRef = useRef<HTMLImageElement>(null)\n  const [debugInfo, setDebugInfo] = useState({ mouseX: 0, mouseY: 0, filename: '' })\n  const [isMobile, setIsMobile] = useState(false)\n  const [orientationEnabled, setOrientationEnabled] = useState(false)\n\n  useEffect(() => {\n    const checkMobile = () => {\n      setIsMobile(window.innerWidth < 768)\n    }\n    checkMobile()\n    window.addEventListener('resize', checkMobile)\n    return () => window.removeEventListener('resize', checkMobile)\n  }, [])\n\n  useEffect(() => {\n    const container = containerRef.current\n    const img = imgRef.current\n    if (!container || !img) return\n\n    function setFromClient(clientX: number, clientY: number) {\n      if (!container || !img) return\n      \n      const rect = container.getBoundingClientRect()\n      const centerX = rect.left + rect.width / 2\n      const centerY = rect.top + rect.height / 2\n\n      // Normalize to [-1, 1]\n      const nx = (clientX - centerX) / (rect.width / 2)\n      const ny = (centerY - clientY) / (rect.height / 2) // Y is flipped\n\n      const clampedX = clamp(nx, -1, 1)\n      const clampedY = clamp(ny, -1, 1)\n\n      const px = quantizeToGrid(clampedX)\n      const py = quantizeToGrid(clampedY)\n\n      const filename = gridToFilename(px, py, size)\n      \n      const imagePath = blobUrls?.[filename] || `/faces/${memberFolder}/${filename}`\n\n      img.src = imagePath\n\n      if (debug) {\n        setDebugInfo({\n          mouseX: Math.round(clientX - rect.left),\n          mouseY: Math.round(clientY - rect.top),\n          filename\n        })\n      }\n    }\n\n    function setFromNormalized(nx: number, ny: number) {\n      if (!img) return\n      \n      const clampedX = clamp(nx, -1, 1)\n      const clampedY = clamp(ny, -1, 1)\n\n      const px = quantizeToGrid(clampedX)\n      const py = quantizeToGrid(clampedY)\n\n      const filename = gridToFilename(px, py, size)\n      const imagePath = blobUrls?.[filename] || `/faces/${memberFolder}/${filename}`\n      img.src = imagePath\n    }\n\n    function handleMouseMove(e: MouseEvent) {\n      setFromClient(e.clientX, e.clientY)\n    }\n\n    function handleTouchMove(e: TouchEvent) {\n      if (e.touches.length > 0) {\n        const touch = e.touches[0]\n        setFromClient(touch.clientX, touch.clientY)\n      }\n    }\n\n    function handleTouch(e: TouchEvent) {\n      if (e.touches.length > 0) {\n        const touch = e.touches[0]\n        setFromClient(touch.clientX, touch.clientY)\n      }\n    }\n\n    function handleOrientation(e: DeviceOrientationEvent) {\n      // beta is front-to-back tilt (-180 to 180), gamma is left-to-right tilt (-90 to 90)\n      const gamma = e.gamma || 0  // left-right tilt\n      const beta = e.beta || 0    // front-back tilt\n      \n      // Normalize gamma (-30 to 30 degrees) to (-1 to 1)\n      const nx = clamp(gamma / 30, -1, 1)\n      // Normalize beta (60 to 120 degrees, where 90 is vertical) to (-1 to 1)\n      const ny = clamp((90 - beta) / 30, -1, 1)\n      \n      setFromNormalized(nx, ny)\n    }\n\n    // Desktop: mouse tracking\n    window.addEventListener('mousemove', handleMouseMove)\n    \n    // Mobile: touch tracking\n    if (isMobile && !disableOnMobile) {\n      document.addEventListener('touchstart', handleTouch, { passive: true })\n      document.addEventListener('touchmove', handleTouchMove, { passive: true })\n      \n      if (orientationEnabled) {\n        window.addEventListener('deviceorientation', handleOrientation)\n      }\n    }\n\n    // Initialize with center position\n    const rect = containerRef.current?.getBoundingClientRect()\n    if (rect) {\n      setFromClient(rect.left + rect.width / 2, rect.top + rect.height / 2)\n    }\n\n    return () => {\n      window.removeEventListener('mousemove', handleMouseMove)\n      document.removeEventListener('touchstart', handleTouch)\n      document.removeEventListener('touchmove', handleTouchMove)\n      window.removeEventListener('deviceorientation', handleOrientation)\n    }\n  }, [memberFolder, blobUrls, size, debug, isMobile, disableOnMobile, orientationEnabled])\n\n  const enableOrientation = async () => {\n    if (typeof (DeviceOrientationEvent as any).requestPermission === 'function') {\n      try {\n        const permissionState = await (DeviceOrientationEvent as any).requestPermission()\n        if (permissionState === 'granted') {\n          setOrientationEnabled(true)\n        }\n      } catch (error) {\n        console.error('Device orientation permission denied:', error)\n      }\n    } else {\n      // Non-iOS or older iOS - no permission needed\n      setOrientationEnabled(true)\n    }\n  }\n\n  return (\n    <div ref={containerRef} className=\"relative\">\n      <img\n        ref={imgRef}\n        alt=\"Face following cursor\"\n        className=\"w-full h-full object-cover rounded-full\"\n        onClick={isMobile && !orientationEnabled && !disableOnMobile ? enableOrientation : undefined}\n      />\n      {debug && (\n        <div className=\"absolute bottom-0 left-0 right-0 bg-black/80 text-white text-xs p-2 rounded-b-full\">\n          Mouse: ({debugInfo.mouseX}, {debugInfo.mouseY}) Image: {debugInfo.filename}\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 418, "column": 0}, "map": {"version":3,"sources":["file:///Users/dxt397/Documents/AlbumClub/lib/supabase/client.ts"],"sourcesContent":["import { createBrowserClient as createSupabaseBrowserClient } from \"@supabase/ssr\";\n\nlet client: ReturnType<typeof createSupabaseBrowserClient> | null = null;\n\nexport function createBrowserClient() {\n  if (client) {\n    return client;\n  }\n\n  client = createSupabaseBrowserClient(\n    process.env.NEXT_PUBLIC_SUPABASE_URL!,\n    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n  );\n\n  return client;\n}\n\nexport function createClient() {\n  return createBrowserClient();\n}\n"],"names":[],"mappings":";;;;;;AAUI;AAVJ;AAAA;;AAEA,IAAI,SAAgE;AAE7D,SAAS;IACd,IAAI,QAAQ;QACV,OAAO;IACT;IAEA,SAAS,IAAA,iTAA2B;IAKpC,OAAO;AACT;AAEO,SAAS;IACd,OAAO;AACT"}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///Users/dxt397/Documents/AlbumClub/app/page.tsx"],"sourcesContent":["'use client'\n\nimport { Sidebar } from '@/components/sidebar'\nimport { FaceTracker } from '@/components/face-tracker'\nimport { Music, Play, Menu } from 'lucide-react'\nimport { useEffect, useState } from 'react'\nimport { createBrowserClient } from '@/lib/supabase/client'\nimport Link from 'next/link'\n\ninterface WeeklyTheme {\n  id: string\n  theme_name: string\n  theme_description: string | null\n  curator: {\n    display_name: string\n    face_images_folder: string | null\n    face_blob_prefix: string | null\n  } | null\n}\n\ninterface MusicPick {\n  id: string\n  artist: string\n  album: string\n  platform_url: string\n  platform: string | null\n  album_artwork_url: string | null\n  weekly_theme_id: string\n  user: {\n    display_name: string\n    face_blob_prefix: string | null\n  } | null\n}\n\nexport default function HomePage() {\n  const [currentTheme, setCurrentTheme] = useState<WeeklyTheme | null>(null)\n  const [weeklyPicks, setWeeklyPicks] = useState<MusicPick[]>([])\n  const [blobUrls, setBlobUrls] = useState<Record<string, string> | undefined>(undefined)\n  const [userFaceImages, setUserFaceImages] = useState<Record<string, Record<string, string>>>({})\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false)\n  const supabase = createBrowserClient()\n\n  useEffect(() => {\n    async function fetchCurrentTheme() {\n      console.log('[v0] Fetching current active theme...')\n      const { data, error } = await supabase\n        .from('weekly_themes')\n        .select(`\n          id,\n          theme_name,\n          theme_description,\n          curator:curator_id (\n            display_name,\n            face_images_folder,\n            face_blob_prefix\n          )\n        `)\n        .eq('is_active', true)\n        .order('created_at', { ascending: false })\n        .limit(1)\n        .maybeSingle()\n\n      console.log('[v0] Theme query result:', { data, error })\n\n      if (!error && data) {\n        console.log('[v0] Found active theme:', data)\n        setCurrentTheme(data)\n        \n        console.log('[v0] Fetching picks for theme:', data.id)\n        const { data: picksData, error: picksError } = await supabase\n          .from('music_picks')\n          .select(`\n            id,\n            artist,\n            album,\n            platform_url,\n            platform,\n            album_artwork_url,\n            weekly_theme_id,\n            user:user_id (\n              display_name,\n              face_blob_prefix\n            )\n          `)\n          .eq('weekly_theme_id', data.id)\n          .order('created_at', { ascending: false })\n        \n        console.log('[v0] Picks query result:', { picksData, picksError, count: picksData?.length || 0 })\n        \n        const { data: allPicks } = await supabase\n          .from('music_picks')\n          .select('id, album, artist, weekly_theme_id')\n          .order('created_at', { ascending: false })\n        \n        console.log('[v0] ALL picks in database:', allPicks)\n        console.log('[v0] Expected theme ID:', data.id)\n        console.log('[v0] Theme ID mismatch check:', allPicks?.map(p => ({\n          album: p.album,\n          has_theme: !!p.weekly_theme_id,\n          matches: p.weekly_theme_id === data.id\n        })))\n        \n        if (picksData) {\n          setWeeklyPicks(picksData)\n        }\n      } else {\n        console.log('[v0] No active theme found or error:', error)\n      }\n    }\n\n    fetchCurrentTheme()\n  }, [])\n\n  useEffect(() => {\n    async function fetchFaceImages() {\n      try {\n        const response = await fetch('/api/get-face-images?member=dave')\n        const data = await response.json()\n        if (data.images) {\n          setBlobUrls(data.images)\n        }\n      } catch (error) {\n        console.error('[v0] Error fetching face images:', error)\n      }\n    }\n\n    fetchFaceImages()\n  }, [])\n\n  useEffect(() => {\n    async function fetchAllUserFaceImages() {\n      const uniqueUsers = new Set(\n        weeklyPicks\n          .map(pick => pick.user?.face_blob_prefix)\n          .filter(Boolean) as string[]\n      )\n      \n      const faceImagesMap: Record<string, Record<string, string>> = {}\n      \n      for (const userPrefix of uniqueUsers) {\n        try {\n          const response = await fetch(`/api/get-face-images?member=${userPrefix}`)\n          const data = await response.json()\n          if (data.images) {\n            faceImagesMap[userPrefix] = data.images\n          }\n        } catch (error) {\n          console.error(`[v0] Error fetching face images for ${userPrefix}:`, error)\n        }\n      }\n      \n      setUserFaceImages(faceImagesMap)\n    }\n\n    if (weeklyPicks.length > 0) {\n      fetchAllUserFaceImages()\n    }\n  }, [weeklyPicks])\n\n  const curatorFolder = currentTheme?.curator?.face_images_folder || 'curator'\n  const curatorName = currentTheme?.curator?.display_name || 'Curator'\n\n  return (\n    <div className=\"flex min-h-screen bg-background\">\n      <button\n        onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n        className=\"fixed top-4 left-4 z-50 md:hidden bg-surface p-2 rounded-lg shadow-lg\"\n      >\n        <Menu className=\"w-6 h-6\" />\n      </button>\n\n      <div className={`${isMobileMenuOpen ? 'block' : 'hidden'} md:block fixed inset-0 z-40 md:relative`}>\n        <div \n          className=\"absolute inset-0 bg-black/50 md:hidden\"\n          onClick={() => setIsMobileMenuOpen(false)}\n        />\n        <Sidebar onClose={() => setIsMobileMenuOpen(false)} />\n      </div>\n      \n      {/* Main Content - Adjusted margins for mobile */}\n      <main className=\"flex-1 p-4 md:ml-64 md:p-8\">\n        <section className=\"mb-4 md:mb-6 text-center\">\n          <h1 className=\"text-2xl md:text-3xl font-bold text-foreground mb-1\">Album Club</h1>\n          <p className=\"text-xs md:text-sm text-muted-foreground\">Neil made us quit Spotify because morals</p>\n        </section>\n\n        {currentTheme ? (\n          <section className=\"mb-8 md:mb-12 bg-gradient-to-r from-primary/20 to-primary/5 rounded-lg p-8 md:p-12 relative overflow-hidden\">\n            <div className=\"flex items-center gap-6 md:gap-8 relative z-10\">\n              {currentTheme.curator && blobUrls && (\n                <div className=\"relative w-32 h-32 md:w-48 md:h-48 flex-shrink-0\">\n                  <div className=\"absolute inset-0 bg-gradient-to-br from-transparent via-background/30 to-background rounded-full z-10 pointer-events-none\" />\n                  <FaceTracker\n                    memberFolder={currentTheme.curator.face_blob_prefix || 'dave'}\n                    blobUrls={blobUrls}\n                    size={256}\n                  />\n                </div>\n              )}\n              \n              <div className=\"flex-1\">\n                <p className=\"text-base md:text-lg text-muted-foreground mb-2\">This Week's Theme</p>\n                <h2 className=\"text-4xl md:text-6xl font-bold text-foreground mb-3\">{currentTheme.theme_name}</h2>\n                {currentTheme.theme_description && (\n                  <p className=\"text-base md:text-lg text-muted-foreground mb-2\">{currentTheme.theme_description}</p>\n                )}\n                <p className=\"text-base md:text-lg text-muted-foreground\">Curated by {curatorName}</p>\n              </div>\n              <Link href=\"/set-theme\">\n                <button className=\"bg-primary hover:bg-primary-hover text-black font-semibold py-3 px-6 md:px-8 rounded-full transition-all text-base whitespace-nowrap\">\n                  Set New\n                </button>\n              </Link>\n            </div>\n          </section>\n        ) : (\n          <section className=\"mb-6 md:mb-8 bg-gradient-to-r from-muted/20 to-muted/5 rounded-lg p-4 md:p-6\">\n            <div className=\"flex items-center justify-between gap-4\">\n              <div className=\"flex-1\">\n                <p className=\"text-xs md:text-sm text-muted-foreground mb-1\">This Week's Theme</p>\n                <h2 className=\"text-2xl md:text-4xl font-bold text-foreground mb-1\">No theme set</h2>\n                <p className=\"text-xs md:text-sm text-muted-foreground\">Create the first weekly theme</p>\n              </div>\n              <Link href=\"/set-theme\">\n                <button className=\"bg-primary hover:bg-primary-hover text-black font-semibold py-2 px-4 md:px-6 rounded-full transition-all text-sm md:text-base whitespace-nowrap\">\n                  Set Theme\n                </button>\n              </Link>\n            </div>\n          </section>\n        )}\n\n        <section>\n          <div className=\"flex items-center justify-between mb-6 md:mb-8\">\n            <h2 className=\"text-2xl md:text-3xl font-bold text-foreground\">This Week's Picks</h2>\n            <Link href=\"/feed\">\n              <button className=\"text-sm md:text-base text-muted-foreground hover:text-foreground font-semibold transition-colors\">\n                Show all\n              </button>\n            </Link>\n          </div>\n          \n          {weeklyPicks.length > 0 ? (\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 md:gap-8 max-w-7xl\">\n              {weeklyPicks.map((pick) => {\n                const userPrefix = pick.user?.face_blob_prefix\n                const userFaces = userPrefix ? userFaceImages[userPrefix] : undefined\n                \n                return (\n                  <a \n                    key={pick.id}\n                    href={pick.platform_url}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"group bg-surface hover:bg-surface-hover p-5 md:p-6 rounded-lg transition-all duration-300 cursor-pointer flex flex-col\"\n                  >\n                    {/* Album artwork - no face tracker here */}\n                    <div className=\"relative mb-5 md:mb-6 aspect-square overflow-hidden rounded shadow-lg\">\n                      {pick.album_artwork_url ? (\n                        <img \n                          src={pick.album_artwork_url || \"/placeholder.svg\"} \n                          alt={`${pick.album} by ${pick.artist}`}\n                          className=\"w-full h-full object-cover\"\n                        />\n                      ) : (\n                        <div className=\"w-full h-full bg-surface-hover flex items-center justify-center\">\n                          <Music className=\"w-16 md:w-20 h-16 md:h-20 text-muted-foreground\" />\n                        </div>\n                      )}\n                      \n                      {/* Play button overlay on hover */}\n                      <div className=\"hidden md:block absolute bottom-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity duration-300\">\n                        <div className=\"w-14 h-14 rounded-full bg-primary flex items-center justify-center shadow-xl hover:scale-110 transition-transform\">\n                          <Play className=\"w-7 h-7 text-black fill-black ml-0.5\" />\n                        </div>\n                      </div>\n                    </div>\n                    \n                    {/* Album info section with face tracker */}\n                    <div className=\"space-y-2 flex-1 relative pb-16\">\n                      <h3 className=\"font-semibold text-lg md:text-xl text-foreground line-clamp-2 group-hover:underline\">\n                        {pick.album}\n                      </h3>\n                      <p className=\"text-base md:text-lg text-muted-foreground line-clamp-1\">\n                        {pick.artist}\n                      </p>\n                      \n                      {/* Face tracker in bottom right of info section */}\n                      {userFaces && userPrefix ? (\n                        <div className=\"absolute bottom-0 right-0 w-20 h-20 md:w-24 md:h-24 rounded-full border-3 border-background shadow-xl overflow-hidden\">\n                          <FaceTracker\n                            memberFolder={userPrefix}\n                            blobUrls={userFaces}\n                            size={256}\n                          />\n                        </div>\n                      ) : (\n                        <div className=\"absolute bottom-0 right-0 w-20 h-20 md:w-24 md:h-24 rounded-full border-3 border-background shadow-xl overflow-hidden bg-surface flex items-center justify-center\">\n                          <Music className=\"w-8 h-8 text-muted-foreground\" />\n                        </div>\n                      )}\n                    </div>\n                  </a>\n                )\n              })}\n            </div>\n          ) : (\n            <div className=\"bg-surface rounded-lg p-8 md:p-16 text-center\">\n              <div className=\"w-16 md:w-24 h-16 md:h-24 rounded-full bg-surface-hover flex items-center justify-center mx-auto mb-4 md:mb-6\">\n                <Music className=\"w-8 md:w-12 h-8 md:h-12 text-muted-foreground\" />\n              </div>\n              <h3 className=\"text-lg md:text-xl font-bold text-foreground mb-2\">No picks yet this week</h3>\n              <p className=\"text-sm md:text-base text-muted-foreground mb-6 md:mb-8\">Be the first to share an album</p>\n              <Link href=\"/add-pick\">\n                <button className=\"bg-primary hover:bg-primary-hover text-black font-bold py-2 md:py-3 px-6 md:px-8 rounded-full transition-all hover:scale-105\">\n                  Add Pick\n                </button>\n              </Link>\n            </div>\n          )}\n        </section>\n      </main>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}